# 申請・承認ワークフロー

## 概要
SaaSの新規導入やアカウント追加・削除を申請し、管理者が承認・却下するワークフロー。コスト管理とガバナンスを両立する。

## URL
| 画面 | URL |
|------|-----|
| 一覧 | `GET /approval_requests` |
| 新規申請 | `GET /approval_requests/new` |
| 詳細 | `GET /approval_requests/:id` |
| 承認 | `POST /approval_requests/:id/approve` |
| 却下 | `POST /approval_requests/:id/reject` |

## 申請タイプ
| タイプ | 説明 |
|--------|------|
| 新規SaaS導入 | 組織にまだ導入していないSaaSの導入申請 |
| アカウント追加 | 既存SaaSへのアカウント追加申請 |
| アカウント削除 | 既存アカウントの削除申請 |

## ステータスフロー
```
pending → approved
        → rejected
（保留）  （承認）
          （却下）
```

## データ項目
| 項目 | 説明 |
|------|------|
| 申請タイプ | new_saas / add_account / remove_account |
| 対象SaaS | 既存SaaSを選択、または新規SaaS名を入力 |
| 申請者 | 申請を行ったユーザー |
| 承認者（指定） | 申請時に指定する承認者（admin/managerから選択、任意） |
| 理由・用途 | 申請の理由を記入 |
| 利用予定人数 | 何人が使う予定か |
| 月額見込みコスト | 想定される月額費用（円） |
| ステータス | pending / approved / rejected |
| 承認/却下者 | 承認/却下した管理者 |
| 処理日時 | 承認/却下した日時 |
| 却下理由 | 却下の場合の理由 |

## 一覧画面の構成
- **承認待ちセクション**: 未処理の申請を上部に表示
- **履歴セクション**: 処理済みの申請を下部に表示（ステータスバッジ付き）

## 承認者の指定
- 申請時にドロップダウンで承認者（admin/manager）を指定可能
- デフォルトは情報システム部の manager（鈴木 花子）
- 未指定の場合、全admin/managerに通知される
- 指定承認者以外のadmin/managerも承認/却下可能

## メール通知の送信先
| 条件 | To | CC |
|------|----|----|
| 承認者が指定されている | 指定承認者 | 他のadmin/manager（承認者・申請者を除く） |
| 承認者が未指定 | admin/manager全員 | なし |

## 詳細画面の機能
- 申請内容の表示（指定承認者の表示を含む）
- 承認/却下ボタン（admin/manager専用）
- 却下時は理由の入力が必要

## アクセス権限
| ロール | 権限 |
|--------|------|
| admin | 申請 + 承認/却下 |
| manager | 申請 + 承認/却下 |
| viewer | 申請のみ |
