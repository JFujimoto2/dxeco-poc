# 社内開発ガイドライン（案）

---

## 1. 目的

本ガイドラインは、社内業務ツールの開発・運用における品質・セキュリティ・保守性の基準を定め、安全かつ効率的な内製化を実現することを目的とする。

Power Automate等のローコードツール、およびRails等のフレームワークによる開発の両方に適用する。

---

## 2. 適用範囲

| 対象 | 例 |
|------|-----|
| フルコード開発 | Rails、Node.js 等による社内Webアプリケーション |
| ローコード開発 | Power Automate、Power Apps 等で作成したフロー・アプリ |
| スクリプト | PowerShell、Python等の業務自動化スクリプト |

**適用外:** Excel マクロ（個人利用に限る）、一時的な検証用スクリプト

---

## 3. 開発者申請フロー

### 3.1 概要

社内開発を行う者は、事前に開発者申請を行い、承認を受けた上で開発ツール・権限の付与を受ける。無断での開発ツールインストールや開発行為は禁止とする。

### 3.2 申請フロー

```
申請者
  ↓ 開発者申請書を提出（目的・対象システム・利用ツール）
所属課長
  ↓ 承認（開発の必要性・妥当性を確認）
情シス
  ↓ セキュリティ審査（ツール・権限の妥当性確認）
  ↓ 承認
  ↓ 開発者権限・ツールの付与
開発開始
```

### 3.3 申請に必要な情報

| 項目 | 内容 |
|------|------|
| 申請者氏名・所属 | 開発を行う本人 |
| 開発目的 | どのシステム・ツールを開発するか |
| 開発手段 | フルコード / ローコード |
| 利用するツール | 必要な開発ツール一覧（下記から選択） |
| 開発期間（見込み） | 開始予定日〜完了予定日 |
| 副担当者 | 属人化防止のため、副担当を1名以上指定 |

### 3.4 付与される権限・ツール

申請が承認されると、以下の開発者向け権限・ツールが付与される。

#### AIツール

| ツール | 内容 | 付与方法 |
|--------|------|---------|
| Claude Code | AI支援によるコーディング・設計・レビュー | 法人プラン（Teamプラン以上）にメンバー追加 |
| Claude（Web/App） | 設計相談・ドキュメント作成・コードレビュー | 法人プランにメンバー追加 |

#### 開発ツール

| ツール | 用途 | 付与方法 |
|--------|------|---------|
| Visual Studio Code | コードエディタ | ダウンロード権限の付与（ソフトウェア配布ポリシー） |
| Docker Desktop / Docker Engine | 開発環境のコンテナ化 | ダウンロード権限の付与（WSL2 + Docker Engine利用なら無料） |
| Git | バージョン管理 | ダウンロード権限の付与 |
| Node.js / Ruby 等 | ランタイム環境 | ダウンロード権限の付与（プロジェクトに応じて） |

#### プラットフォーム

| ツール | 用途 | 付与方法 |
|--------|------|---------|
| GitHub | ソースコード管理・CI/CD | Organization へのメンバー追加 |
| Azure | インフラ（Container Apps, PostgreSQL等） | サブスクリプションへのロール付与 |
| Azure Container Registry | コンテナイメージ管理 | プッシュ権限の付与 |

### 3.5 権限レベル

開発者の役割に応じて付与する権限を分ける。

| 権限レベル | 対象者 | GitHub権限 | Azure権限 | AIツール |
|-----------|--------|-----------|-----------|---------|
| 開発者（標準） | 一般の開発担当者 | Write（PRの作成・コミット） | 開発環境のみ | Claude Code + Web |
| 開発者（上級） | リリース権限を持つ担当者 | Maintain（PRマージ・ブランチ管理） | 開発 + 本番環境 | Claude Code + Web |
| 管理者 | 情シス管理者 | Admin（リポジトリ設定・メンバー管理） | 全リソース管理 | Claude Code + Web |

### 3.6 申請の更新・失効

| イベント | 対応 |
|---------|------|
| 開発プロジェクト完了 | 保守フェーズに移行。不要なツールの権限を見直す |
| 異動 | 異動先で開発業務がない場合、開発者権限を失効。ツールをアンインストール |
| 退職 | 退職日までに全権限を削除。GitHub Organizationからの除外、AIツールアカウント無効化 |
| 年次見直し | 年1回、開発者一覧と付与権限の棚卸しを実施 |

### 3.7 コスト

| ツール | 費用目安（1名あたり） | 備考 |
|--------|---------------------|------|
| Claude Team | 約$30/月 | 法人プラン |
| Docker Desktop Business | $24/月 | 250名以上の企業は有料。WSL2 + Docker Engine利用なら無料 |
| VS Code / Git / Node.js | 無料 | — |
| Azure | プロジェクト予算内 | リソース利用量に応じた従量課金 |

---

## 4. 開発プロセス

### 4.1 企画・承認

| ステップ | 内容 | 成果物 |
|----------|------|--------|
| 1. 企画 | 課題の整理、解決手段の検討（SaaS導入 vs 内製 vs ローコード） | 企画書（簡易可） |
| 2. 承認 | 課長承認（開発着手の許可） | 承認記録 |
| 3. 設計 | 機能設計、データ設計、セキュリティ要件の整理 | 設計ドキュメント |
| 4. 開発 | 本ガイドラインに従って開発 | ソースコード |
| 5. レビュー | セキュリティチェック、テスト結果の確認 | レビュー記録 |
| 6. リリース | 本番環境へのデプロイ | リリース記録 |

### 4.2 開発手段の選定基準

| 判断軸 | SaaS導入 | ローコード | フルコード |
|--------|----------|------------|------------|
| 要件が市販製品で満たせる | ◎ | — | — |
| 簡易なフロー自動化（10ステップ以内） | — | ◎ | — |
| 複数テーブルの関連・複雑なロジック | — | △ | ◎ |
| 500名以上の利用・継続的な拡張 | — | × | ◎ |
| 外部API連携（バッチ処理含む） | — | △ | ◎ |

---

## 5. コード管理

### 5.1 フルコード開発

| 項目 | 基準 |
|------|------|
| バージョン管理 | Git（GitHub）必須 |
| ブランチ戦略 | main（開発）→ prod（本番）。直接push禁止 |
| コードレビュー | Pull Request必須。CI全パス後にマージ |
| コミットメッセージ | 変更内容が分かる日本語 or 英語 |

### 5.2 ローコード開発

| 項目 | 基準 |
|------|------|
| 所有者 | 作成者＋副担当の2名以上を設定 |
| 命名規則 | `[部署]-[用途]-[連番]`（例: `IS-退職者通知-001`） |
| 変更記録 | 変更日・変更者・変更内容をSharePoint等に記録 |
| 環境分離 | 可能な限りテスト環境と本番環境を分離 |

---

## 6. テスト

### 6.1 フルコード開発

| テスト種別 | 基準 | ツール例 |
|-----------|------|---------|
| ユニットテスト | 主要ロジックをカバー | RSpec, Jest |
| リクエストテスト | 全エンドポイントの正常・異常系 | RSpec |
| E2Eテスト | 主要な業務フロー | Playwright |
| セキュリティスキャン | CI毎回実行、警告0を維持 | Brakeman, bundler-audit |
| コードスタイル | CI毎回実行、違反0を維持 | Rubocop, ESLint |

**目標カバレッジ:** 行カバレッジ 80%以上

### 6.2 ローコード開発

| テスト種別 | 基準 |
|-----------|------|
| 動作確認 | 正常系・異常系をテスト環境で手動確認 |
| 確認記録 | 確認日・確認者・確認結果をドキュメントに記録 |

---

## 7. CI/CD

### 7.1 フルコード開発（必須）

| 項目 | 基準 |
|------|------|
| CIツール | GitHub Actions |
| 実行タイミング | 全PRで自動実行 |
| 必須ジョブ | コードスタイル / セキュリティスキャン / テスト |
| マージ条件 | 全CIジョブがパスしていること |
| デプロイ | prodブランチへのマージで自動デプロイ |

### 7.2 ローコード開発

CIの仕組みがプラットフォームにないため、手動での確認・承認プロセスを代替とする。

| 項目 | 基準 |
|------|------|
| 変更時 | 副担当に変更内容を共有し、確認を受ける |
| 本番反映 | テスト環境で確認後に本番環境へ反映 |

---

## 8. ドキュメント

### 8.1 必須ドキュメント

| ドキュメント | フルコード | ローコード | 内容 |
|-------------|-----------|-----------|------|
| 機能概要 | 必須 | 必須 | 何ができるか、対象ユーザー |
| 運用手順書 | 必須 | 必須 | 日常の運用操作手順 |
| 開発・保守手順書 | 必須 | — | 環境構築、デプロイ、保守手順 |
| 環境変数・設定一覧 | 必須 | 必須 | 秘密情報の管理方法含む |
| セキュリティ対策 | 必須 | 簡易可 | 認証・認可・暗号化等の対策内容 |

### 8.2 ドキュメントの保管

| 保管先 | 対象 |
|--------|------|
| GitHubリポジトリ内 | 技術ドキュメント（フルコード） |
| SharePoint | 運用手順書、ローコード関連ドキュメント |

---

## 9. 保守体制

### 9.1 体制

| 役割 | 責務 | 人数 |
|------|------|------|
| 主担当 | 開発・保守・障害対応 | 1名以上 |
| 副担当 | 主担当不在時の対応、コードレビュー | 1名以上 |

**2名以上の体制を必須とする。** 主担当が異動・退職する場合は、後任への引き継ぎを完了してから異動する。

### 9.2 定期保守

| 作業 | 頻度 | 対象 |
|------|------|------|
| セキュリティパッチ適用 | 月次確認 | フルコード |
| 依存パッケージ更新 | 四半期 | フルコード |
| フレームワークバージョンアップ | 年次 | フルコード |
| フロー動作確認 | 四半期 | ローコード |
| ドキュメント最新化 | 変更時 | 全て |

---

## 10. AI利用ガイドライン

### 10.1 基本方針

社内開発においてAIツールの利用を許可する。AIは開発の生産性を大幅に向上させる有効な手段であり、積極的な活用を推奨する。ただし、情報セキュリティと品質を確保するため、以下のルールに従うこと。

### 10.2 アカウント管理

| 項目 | ルール |
|------|--------|
| 利用アカウント | **会社が管理するアカウントでの利用のみ認める**。個人アカウントでの業務利用は禁止 |
| アカウント発行 | 情シスが管理するメールアドレスで登録。利用者を把握できる状態を維持する |
| 退職・異動時 | アカウントの無効化・削除を速やかに実施する |
| 共有アカウント | 禁止。個人単位でアカウントを発行し、操作の追跡を可能にする |

### 10.3 利用可能なAIツール

情シスが承認したAIツールのみ利用可能とする。未承認ツールの利用は禁止。

| ツール | 用途 | プラン | 備考 |
|--------|------|--------|------|
| Claude | 設計相談、コード生成、ドキュメント作成、コードレビュー | Team以上を推奨 | データ保持ポリシーの確認が必要 |
| ChatGPT | 一般的な技術質問 | Team以上を推奨 | 利用する場合は別途申請 |

**承認されていないAIツール・サービスでの業務コード生成は禁止。**

### 10.4 データの入力制限

| 分類 | 入力可 | 入力禁止 |
|------|--------|---------|
| コード | 汎用的なロジック、フレームワークの使い方、エラーの相談 | 秘密情報がハードコードされたコード |
| 設計 | システム構成の相談、DB設計の相談、アーキテクチャ検討 | 実際の顧客データを含む設計書 |
| ドキュメント | 文章のブラッシュアップ、テンプレート生成 | 個人情報を含むドキュメント |
| データ | サンプルデータ、ダミーデータ | 本番データ、実際の個人情報 |

**入力禁止情報の詳細:**

| 禁止情報 | 具体例 |
|---------|--------|
| 個人情報 | 氏名、メールアドレス、社員番号、電話番号、住所 |
| 認証情報 | パスワード、APIキー、クライアントシークレット、接続文字列、トークン |
| 経営情報 | 未公開の売上・利益、M&A情報、人事異動情報 |
| 顧客情報 | 顧客名、契約内容、取引条件 |
| 社内システム情報 | IPアドレス、サーバー名、ネットワーク構成の詳細 |

**迷ったら入力しない。** 判断に迷う場合は上長に確認すること。

### 10.5 AI生成コードの品質管理

AIが生成したコードは「下書き」であり、そのまま本番投入してはならない。

| 項目 | ルール |
|------|--------|
| レビュー責任 | AI生成コードも開発者が内容を理解し、レビューする責任を持つ |
| テスト | AI生成コードに対しても通常と同じテスト基準を適用する |
| セキュリティスキャン | Brakeman等のセキュリティスキャンを必ず通す |
| ライセンス確認 | OSSライセンスに抵触するコードが含まれていないか確認する |
| 動作確認 | AI生成コードの動作を必ず手元で確認してからコミットする |
| 丸コピー禁止 | AI出力をそのままコピー&ペーストせず、内容を理解した上で採用する |

### 10.6 会話履歴・データ保持

| 項目 | ルール |
|------|--------|
| 会話履歴の保存設定 | 可能な場合、業務利用では会話履歴のトレーニング利用をオフにする |
| プラン選択 | ビジネス向けプラン（データがモデルの学習に使われない）を利用する |
| プロジェクト機能 | 業務別にプロジェクト・スレッドを分けて管理する |
| 機密プロジェクト | 機密度の高いプロジェクトでは、会話終了後に履歴を削除する |

### 10.7 禁止事項

| 禁止事項 | 理由 |
|---------|------|
| 個人アカウントでの業務コード生成 | 会社の管理外になり、データの行方が追跡できない |
| 未承認AIツールの利用 | セキュリティポリシーが未確認のサービスにデータが送信される |
| AIの出力をレビューなしで本番投入 | ハルシネーション（誤った情報の生成）、セキュリティ脆弱性のリスク |
| AIに本番データを入力して分析させる | 個人情報・業務データの外部送信に該当 |
| AIへの秘密情報の入力 | APIキー・パスワード等の漏洩リスク |
| AI生成コードのライセンス未確認での利用 | 法的リスク |

### 10.8 インシデント対応

AIツールに誤って秘密情報や個人情報を入力してしまった場合：

1. 速やかに上長に報告する
2. 該当する会話・スレッドを削除する
3. 入力した情報の種類と影響範囲を記録する
4. 必要に応じてパスワード・APIキーの変更を実施する
5. 再発防止策を検討する

---

## 11. インフラ・環境

### 11.1 利用可能なインフラ

| 環境 | 用途 | 承認 |
|------|------|------|
| Azure | 社内Webアプリケーションのホスティング | 課長承認 |
| Microsoft 365 | Power Automate、Power Apps、SharePoint | 既存契約内 |

### 11.2 環境構成

| 環境 | 用途 | 必須 |
|------|------|------|
| 開発環境 | 開発・テスト（Docker Compose等） | 必須 |
| 本番環境 | 実運用 | 必須 |
| ステージング環境 | 本番同等での最終確認 | 全社展開時に検討 |

---

## 12. 廃止・引き継ぎ

| 状況 | 対応 |
|------|------|
| ツールの廃止 | データのエクスポート → 利用者への周知 → リソース削除 |
| 担当者の異動 | 後任へのドキュメント引き継ぎ → 1ヶ月の並行期間 |
| 担当者の退職 | 退職1ヶ月前までに後任を確定し引き継ぎ完了 |

---

## 付録: 適用実績

### SaaS管理ツール（本ガイドラインの基準を満たす第一号）

| 項目 | 状態 |
|------|------|
| バージョン管理 | GitHub（ブランチ保護、PR必須） |
| テスト | RSpec 291件 + Playwright E2E 73件（カバレッジ 95.6%） |
| CI/CD | 5ジョブ自動実行（lint / security / test / e2e） |
| セキュリティ | Brakeman 0警告、bundler-audit、importmap audit |
| ドキュメント | 機能仕様書16本、運用ガイド、開発手順書、セキュリティ対策書 |
| インフラ | Azure Container Apps + PostgreSQL |
| 認証 | Entra ID SSO（OIDC） |

---

作成日: 2026年2月16日