# ユーザー運用ガイド

SaaS管理ツールの利用者向け操作ガイド。

## 目次

- [ログイン](#ログイン)
- [ロール別できること一覧](#ロール別できること一覧)
- [情シス管理者（admin）の運用](#情シス管理者adminの運用)
  - [日次業務](#日次業務)
  - [週次業務](#週次業務)
  - [月次・四半期業務](#月次四半期業務)
  - [随時業務](#随時業務)
- [マネージャー（manager）の運用](#マネージャーmanagerの運用)
- [一般ユーザー（viewer）の運用](#一般ユーザーviewerの運用)
- [よくある操作手順](#よくある操作手順)
- [通知について](#通知について)

---

## ログイン

1. ブラウザで SaaS管理ツールの URL にアクセス
2. **「Microsoft アカウントでログイン」** をクリック
3. 会社の Microsoft アカウントで認証
4. ダッシュボードに遷移

※ 初回ログイン時に viewer ロールで自動登録される。管理者が必要に応じてロールを変更する。

---

## ロール別できること一覧

| 操作 | viewer | manager | admin |
|------|:------:|:-------:|:-----:|
| ダッシュボード閲覧（コスト・アラート含む） | ○ | ○ | ○ |
| SaaS台帳の閲覧 | ○ | ○ | ○ |
| SaaS台帳の編集 | - | ○ | ○ |
| アカウント一覧の閲覧 | ○ | ○ | ○ |
| アカウントの追加・編集・削除 | - | ○ | ○ |
| CSVインポート（SaaS / アカウント） | - | ○ | ○ |
| CSVエクスポート（SaaS / アカウント） | ○ | ○ | ○ |
| CSVエクスポート（操作ログ） | - | - | ○ |
| メンバー情報の閲覧 | ○ | ○ | ○ |
| メンバー情報の編集 | - | - | ○ |
| サーベイへの回答 | ○ | ○ | ○ |
| サーベイの作成・配信 | - | - | ○ |
| サーベイ結果から削除タスク生成 | - | - | ○ |
| タスクのチェックリスト更新 | ○ | ○ | ○ |
| タスクの作成 | - | - | ○ |
| SaaS利用申請の提出 | ○ | ○ | ○ |
| 申請の承認・却下 | - | ○ | ○ |
| バッチ実行（Entra ID同期等） | - | - | ○ |
| 操作ログの閲覧 | - | - | ○ |

---

## 情シス管理者（admin）の運用

### 日次業務

#### 1. ダッシュボードの確認

ログイン後のダッシュボードで以下を確認する。

| 確認項目 | 対応 |
|----------|------|
| 承認待ちの件数が 0 でない | → 申請・承認ページで内容を確認し、承認または却下 |
| 進行中タスクがある | → タスク管理ページで進捗を確認 |
| 配信中サーベイがある | → 回答率を確認。低ければリマインド送信 |
| 契約更新アラート（30日以内） | → 黄色：更新準備を開始。赤色：至急対応（7日以内 or 期限切れ） |
| パスワード期限アラート | → 赤色：期限切れ（90日超）。黄色：期限間近（76-90日） |
| 月額/年額コスト | → コスト内訳の円グラフとカテゴリ別表で傾向を確認 |
| 最近の操作に不審な記録 | → 操作ログで詳細を確認 |

#### 2. 申請の処理

1. サイドバー「申請・承認」をクリック
2. **承認待ち**セクションの申請をクリック
3. 申請内容（理由、コスト、人数）を確認
4. **「承認」** または **「却下」** をクリック
   - 却下の場合は理由を記入する（必須）

**判断基準の例:**
- 月額コストが予算内か
- 既存SaaSで代替できないか
- 利用人数が妥当か

### 週次業務

#### 3. Entra IDユーザー同期

メンバー情報を最新の状態に保つため、週1回の同期を推奨。

1. サイドバー「バッチ管理」をクリック
2. **「Entra IDユーザー同期」** の「実行」ボタンをクリック
3. 実行履歴で結果を確認（success になっていること）
4. 退職者アカウント検出が自動的に後続実行される

**確認ポイント:**
- 更新件数: 異動・入退社に伴う変更が反映されているか
- エラー件数: 0 であること。0 でなければ内容を確認

#### 4. Entra ID SaaSアカウント同期

SSO連携済みSaaSのアカウント情報を最新化する。

1. サイドバー「バッチ管理」をクリック
2. **「Entra ID SaaSアカウント同期」** の「実行」ボタンをクリック
3. 実行結果で新規作成・停止件数を確認

> SaaS台帳の「Entra ID アプリID」にエンタープライズアプリのオブジェクトIDを入力しておくと、同期対象として紐付けられる。未入力の場合はSaaS名で自動照合する。

#### 5. 退職者アカウントの確認

Entra ID同期の後続で検出された退職者の残存アカウントを処理する。

1. サイドバー「アカウント管理」をクリック
2. ステータス「suspended」でフィルタ
3. 残存アカウントがあれば、対象SaaSの管理画面でアカウントを削除
4. 本ツール上でもステータスを「deleted」に変更

### 月次・四半期業務

#### 6. アカウント棚卸しサーベイの実施

全社員にSaaSの利用状況を確認する。未利用アカウントの検出とコスト削減が目的。

**作成:**
1. サイドバー「サーベイ」→「新規作成」
2. タイトル: 「2026年Q1 アカウント棚卸し」
3. タイプ: 「アカウント棚卸し」
4. 締切: 2週間後を推奨
5. 「下書き保存」をクリック

**配信:**
1. 作成したサーベイの詳細ページを開く
2. 「配信」ボタンをクリック（Teams通知 + メール通知が送信される）

**回答督促:**
1. 締切の3日前に回答率を確認
2. 回答率が低ければ「リマインド」ボタンをクリック（未回答者にメール送信）

**クローズ & 不要アカウント対応:**
1. 締切後に「クローズ」ボタンをクリック
2. 「不要アカウント一覧」セクションで「利用していない」の回答を確認
3. 「削除タスクを作成」ボタンでワンクリックでタスク化 → タスク管理で進捗管理

#### 7. コスト分析

1. ダッシュボードのコスト可視化セクションで月額・年額の合計を確認
2. カテゴリ別円グラフで偏りを把握
3. 詳細分析が必要な場合は、SaaS一覧から **「CSVエクスポート」** でデータを出力しExcelで分析

#### 8. タスクプリセットの見直し

入社・退職・異動の作業手順に変更があればプリセットを更新する。

1. サイドバー「タスク管理」→ プリセット一覧へ移動
2. 該当プリセットの「編集」をクリック
3. チェックリスト項目を追加・変更・削除
4. 「更新」をクリック

### 随時業務

#### 9. 入退社・異動タスクの作成

人事異動が発生したらタスクを作成する。

1. サイドバー「タスク管理」→「新規作成」
2. タスクタイプを選択（入社 / 退職 / 異動）
3. 対象ユーザーを選択
4. プリセットからチェックリストを読み込み
5. 期限を設定して作成

> アサイン先のユーザーにはメールとTeamsで通知が送信される。

**タスク進捗の確認:**
- 各チェックリスト項目の担当者が完了チェックを入れる
- 完了率が100%になったらタスクを完了にする

#### 10. SaaS台帳の更新

新しいSaaSを導入した場合や契約が変わった場合に更新する。

**新規登録:**
1. サイドバー「SaaS台帳」→「新規登録」
2. SaaS名、カテゴリ、ステータス、URL、担当者を入力
3. 契約情報（プラン、月額、請求サイクル、契約期間）を入力
4. 「登録」をクリック

**CSVインポート（大量登録時）:**
1. SaaS一覧画面の「CSVインポート」ボタンをクリック
2. 「テンプレートをダウンロード」でCSVテンプレートを取得
3. テンプレートに従ってデータを記入
4. ファイルを選択して「インポート」
5. 成功・スキップ・エラー件数が表示される

> 既に同じ名前のSaaSが登録されている場合はスキップされる。

**CSVエクスポート:**
1. SaaS一覧画面で必要に応じてフィルタ（キーワード・カテゴリ・ステータス）を設定
2. 「CSVエクスポート」ボタンをクリック
3. 現在のフィルタ条件に合致するデータがCSVでダウンロードされる

> アカウント一覧・操作ログ（adminのみ）でも同様にCSVエクスポートが可能。

#### 11. 操作ログの確認

セキュリティ監査や問題調査のために操作ログを確認する。

1. サイドバー「操作ログ」をクリック
2. 必要に応じてフィルタ:
   - **リソース種別**: 特定のモデル（Saas, User 等）に絞り込み
   - **ユーザー**: 特定の操作者に絞り込み
   - **日付範囲**: 調査対象の期間を指定
3. 各ログの「詳細」をクリックすると変更前後の差分を確認できる
4. 「CSVエクスポート」で監査用にデータを出力可能

---

## マネージャー（manager）の運用

### 申請の承認・却下

自部門のメンバーからSaaS利用申請が来た場合に対応する。

> 承認依頼はメールとTeamsで通知される。

1. ダッシュボードの「承認待ち」カードをクリック
2. 申請内容を確認（理由、コスト見積もり、利用人数）
3. 承認または却下を判断
   - 承認: 「承認」ボタンをクリック
   - 却下: 理由を入力して「却下」ボタンをクリック

> 承認・却下の結果は申請者にメールで通知される。

### SaaS・アカウント情報の管理

部門で利用するSaaSの情報を最新に保つ。

- SaaS台帳: 担当するSaaSの情報（URL、説明、契約情報）を更新
- アカウント管理: 部門メンバーのアカウント追加・変更・削除

### タスクのチェックリスト対応

自分がアサインされたタスクアイテムを完了させる。

1. サイドバー「タスク管理」をクリック
2. 進行中のタスクを開く
3. 自分が担当のチェックリスト項目にチェックを入れる

---

## 一般ユーザー（viewer）の運用

### サーベイへの回答

管理者からサーベイが届いたら回答する。メールとTeamsで通知が届く。

1. サイドバー「サーベイ」をクリック
2. 「active」のサーベイを開く
3. 自分に割り当てられたアカウントごとに回答:
   - **アカウント棚卸し**: 「利用中」または「利用していない」を選択
   - **パスワード更新**: 「更新済み」または「未対応」を選択
4. 必要に応じて備考を入力
5. 回答を送信

**注意:** 締切日までに全アカウントの回答を完了すること。

### SaaS利用申請

新しいSaaSを使いたい場合やアカウントを追加してほしい場合に申請する。

1. サイドバー「申請・承認」→「新規申請」
2. 申請タイプを選択:
   - **新規SaaS導入**: まだ組織で使っていないSaaSの導入
   - **アカウント追加**: 既存SaaSのアカウント追加
   - **アカウント削除**: 不要アカウントの削除依頼
3. 対象SaaSを選択（または新規SaaS名を入力）
4. 理由・用途を具体的に記入
5. 利用予定人数と月額コスト見込みを入力
6. 「申請する」をクリック

**申請のコツ:**
- 理由は具体的に書く（「業務効率化のため」より「週5時間のExcel作業をNotionで自動化したい」）
- コスト見込みは事前に調べておく
- 既存SaaSで代替できないか検討した旨を書くと承認されやすい

### 自分のアカウント確認

自分が持っているSaaSアカウントの一覧を確認できる。

1. サイドバー「メンバー」をクリック
2. 自分の名前をクリック
3. 保有SaaSアカウント一覧が表示される

### タスクのチェックリスト対応

自分がアサインされた作業がある場合はチェックリストを更新する。

1. サイドバー「タスク管理」をクリック
2. 自分が関係するタスクを開く
3. 担当項目が完了したらチェックを入れる

---

## よくある操作手順

### SaaS契約更新時

1. ダッシュボードの契約更新アラートから対象SaaSを確認
2. SaaS台帳で該当SaaSを開く → 「編集」
3. 契約情報（契約満了日、月額、プラン名）を更新
4. 「更新」をクリック

### 新入社員が入社したとき

1. **[admin]** Entra IDユーザー同期を実行（バッチ管理）
2. **[admin]** タスク管理で「入社処理」タスクを作成（アサイン先にメール通知）
3. **[admin/担当者]** チェックリストに沿ってアカウント作成
4. **[admin]** アカウント管理で各SaaSのアカウントを登録

### 退職者が出たとき

1. **[admin]** Entra IDユーザー同期を実行 → 退職者検出が自動実行
2. **[admin]** Entra ID SaaSアカウント同期を実行 → アカウント自動停止
3. **[admin]** タスク管理で「退職処理」タスクを作成
4. **[admin/担当者]** チェックリストに沿ってアカウント削除・備品返却
5. **[admin]** アカウント管理で各SaaSアカウントのステータスを「deleted」に変更

### 部署異動があったとき

1. **[admin]** タスク管理で「異動処理」タスクを作成
2. **[admin/担当者]** 異動元部署の不要アカウントを削除
3. **[admin/担当者]** 異動先部署の必要アカウントを追加
4. **[admin]** メンバー情報の部署を更新（Entra ID同期で自動反映される場合は不要）

### 四半期のSaaS棚卸し

1. **[admin]** サーベイを作成（「アカウント棚卸し」タイプ）
2. **[admin]** サーベイを配信（メール + Teams通知）
3. **[全員]** 各自のアカウント利用状況を回答
4. **[admin]** 締切前にリマインド送信（未回答者にメール通知）
5. **[admin]** 締切後にクローズ → 不要アカウント一覧から削除タスクを生成
6. **[admin]** 不要アカウント削除を実施 → コスト削減効果を算出

---

## 通知について

操作に応じて Teams チャネルとメールで通知が送られる。

### Teams 通知

| イベント | 通知先チャネル |
|----------|--------------|
| SaaS利用申請の提出 | 一般チャネル |
| 申請の承認・却下 | 一般チャネル |
| 契約更新アラート（バッチ実行時） | 一般チャネル |
| サーベイ配信 | サーベイ専用チャネル |
| アプリケーションエラー | エラー通知チャネル |
| コンテナ再起動 | エラー通知チャネル |

### メール通知

| イベント | 宛先 | CC |
|----------|------|-----|
| タスクアサイン | アサイン先 | 部署manager + タスク作成者 |
| 承認依頼 | admin/manager 全員 | - |
| 申請承認 | 申請者 | SaaSオーナー |
| 申請却下 | 申請者 | SaaSオーナー |
| サーベイ配信 | 対象ユーザー全員 | - |
| サーベイリマインド | 未回答ユーザーのみ | - |

> メール通知は SMTP が設定されている場合のみ有効。未設定時はスキップされる。
